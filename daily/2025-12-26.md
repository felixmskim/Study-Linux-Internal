# 📅 2025-12-26

## 🎯 목표
- ```include/linux/sched.h``` 파일에 있는 ```struct task_struct``` 훑어보자! (아직 못함)

## 📝 학습 내용
- [실습] **IDE 설정:** VSCode Remote-WSL을 통해 윈도우 UI와 리눅스 커널 소스 연결
- [실습] **인덱싱 최적화:** ```bear```를 이용한 전체 빌드 대신, ```scripts/clang-tools/gen_compile_commands.py```를 사용하여 빌드 없이 ```compile_commands.json``` 생성
- [실습] **도구 설치:** WSL 내부에 ```clangd``` 바이너리 및 VSCode 확장 프로그램 설치

## 🔍 직면한 문제 & 해결 (Troubleshooting)
- **문제:** 우분투를 통해 ```include/linux/sched.h``` 파일을 찾지 못했다.
- **원인:** 현재 우분투 환경에 리눅스 커널 전체 소스 코드를 내려받지 않았다. ```/usr/include```에 있는 헤더들은 User-space 프로그램을 위한 것
- **해결:** 커널 소스코드 내려받기
    1. **필수 패키지 설치:** 빌드와 분석에 필요한 도구들 설치
    ```bash
    sudo apt update
    sudo apt install git build-essential libncurses-dev flex bison libssl-dev libelf-dev bear -y
    ```
    2. **소스코드 Clone:** 리눅스 커널은 용량이 매우 크니 최선 버전의 `depth 1`만큼만 받기
    ```bash
    git clone --depth 1 https://github.com/torvalds/linux.git ~/linux-src
    ```
---
- **문제:** 윈도우(OneDrive) 경로에서 커널 소스 분석 및 인덱싱 시도 시 속도 저하 및 오류 발생 우려가 있다고 한다.

- **원인:** NTFS(윈도우)와 EXT4(리눅스) 간의 호환성 문제, 대소문자 구분 문제, 심볼릭 링크 깨짐, OneDrive 동기화 오버헤드가 발생한다.

- **해결:** 커널 소스코드는 반드시 **WSL 내부 경로(~/)** 에 두고, VSCode Remote-WSL 기능을 활용하여 접근하였다.

## 💡 인사이트 (오늘 깨달은 것)
- ***Many-core-Scalability***의 대한 정확한 정의를 알았다. **자원 경합**, **통신 비용**, **순차 실행**등의 이유로 performance가 core 수와 정비례하지 않는다.
- 단순히 코드를 읽는 것보다, 거대한 코드 베이스를 IDE가 이해하도록 만드는 **컴파일 데이터베이스(compile_commands.json)** 의 중요성을 알게 됨. 시스템 연구자에게는 도구를 다루는 능력도 실력의 일부라는 점을 깨달았다.

## 🔗 참고 자료