# 📅 2026-01-04

## 🎯 목표
- WSL2(Ubuntu 24.04.03 LTS) 환경에서 리눅스 커널 소스코드 빌드
- 최신 stable 버전(v6.18.2) 커널 빌드 성공 및 결과물 확인

## 📝 학습 내용
- [이론] 리눅스 커널 소스 트리 구조 이해
    - `arch`: CPU 아키텍처별 의존적인 코드 관리
    - `mm`: 메모리 관리
    - `fs`: 파일 시스템
    - `net`: 네트워크 등 각 디렉토리의 역할 파악
    - 그외, 핵심 요소 파악
- [실습] WSL2 특화 커널 빌드 워크플로우 구축
    - `git clone`을 통한 커널 소스 확보 및 `git tag`를 활용한 버전 관리
    - `/proc/config.gz`를 활용하여 현재 WSL2 실행 환경에 최적화된 `.config` 추출 방법 숙지
    - `Out-of-tree build(O= 옵션)`를 사용하여 소스 코드와 빌드 결과물을 분리하는 깔끔한 관리법 습득

## 🔍 소스코드 분석: 커널 소스 디렉토리(Main)
- 핵심 디렉토리 요약:
    - `arch/`: 시스템 아키텍처(x86, arm 등)별 소스
    - `include/`: 커널 구현에 필요한 공통 헤더 파일
    - `init/`: 커널 부팅 및 초기화 로직의 시작점
    - `kernel/`: 스케줄러 등 커널 핵심 소스

## 🔍 직면한 문제 & 해결 (Troubleshooting)
- **문제:** 커널 빌드 과정 중 서명 관련 인증서 오류로 인한 빌드 중단 가능성 확인
- **원인:** 기존 배포판의 `.config`에는 특정 개인키나 신뢰된 키 설정(`CONFIG_SYSTEM_TRUSTED_KEYS` 등)이 포함되어 있어, 로컬 환경의 인증서와 맞지 않아 오류 발생
- **해결:** `.config` 파일 내 아래 세 가지 보안 설정을 주석 처리하여 해결
```bash
# CONFIG_MODULE_SIG_ALL
# CONFIG_MODULE_SIG_KEY
# CONFIG_SYSTEM_TRUSTED_KEYS
```

## 💡 인사이트 (오늘 깨달은 것)
- 부팅 가능한 커널 이미지인 `bzImage`와 디버깅 정보를 담은 `vmlinux`(ELF 파일)의 차이점을 알게 되었고, 나중에 커널 디버깅 시 `vmlinux`가 왜 중요한지 깊이 공부해볼까?

## 🔗 참고 자료
- [Tutorial] Linux Tutorial #0 커널 소스 빌드하기 
- [Link] https://velog.io/@mythos/Linux-Tutorial-0-%EC%BB%A4%EB%84%90-%EC%86%8C%EC%8A%A4-%EB%B9%8C%EB%93%9C%ED%95%98%EA%B8%B0