# 📅 2026-01-07

## 🎯 목표
- 빌드 완료된 리눅스 커널 이미지와 모듈을 시스템에 설치하고, WSL2 환경의 특수성을  이해하여 커스텀 커널로 부팅을 시도

## 📝 학습 내용
- [이론] WSL2는 일반적인 가상머신(VM)과 달리 GRUB 부트로더를 사용하지 않고, 윈도우가 관리하는 커널 서비스를 통해 실행된다는 점을 학습
[실습] 커널 모듈 및 이미지 설치:

- `modules_install`: 빌드된 모듈(`.ko`)을 `/lib/modules/` 경로로 배포.
- `install`: 커널 이미지(`vmlinuz`) 및 설정 파일을 `/boot/` 경로로 배포.

- [실습] **`.wslconfig`를 활용한 커널 교체:** 윈도우 환경 설정 파일을 통해 WSL2가 기본 커널 대신 내가 빌드한 커널(vmlinux)을 로드하도록 설정하는 워크플로우를 익힘.

## 🔍 직면한 문제 & 해결 (Troubleshooting)
- **문제:** 커널 설치 후 재부팅 시 커널 선택 화면(GRUB)이 나타나지 않음
- **원인:** WLS2는 빠른 실행을 위해 부트로더 단계를 생략하고 윈도우 호스트가 커널을 직접 로드하는 구조
- **해결:** 
1. 빌드된 vmlinux 파일을 윈도우 파일 시스템(`C:\Users\...`)으로 복사 
2. `.wslconfig` 파일의 [wsl2] 섹션 아래에 `kernel=C:\\path\\to\\vmlinux` 경로 지정. 
3. `wsl --shutdown` 명령어로 WSL2 인스턴스를 초기화한 후 재실행하여 설정값 반영.

## 💡 인사이트 (오늘 깨달은 것)
- 리눅스 전공 서적에서 배운 `GRUB을 통한 부팅`이 모든 환경에 동일하게 적용되지 않음을 깨달음. 사용 중인 플랫폼의 하이퍼바이저 특성을 이해하는 것이 중요함.
- `make` 명령어가 단순히 바이너리를 만드는 것을 넘어, `install` 과정을 통해 운영체제가 인식할 수 있는 정해진 경로 (`/boot`, `/lib/modules`)에 배치하는 과정이 필수적임을 이해함.
- 이제 내가 원하는 대로 커널을 빌드하고 부팅할 수 있게 되었으므로, 소스코드를 수정하여 시스템 성능 변화를 측정할 수 있는 기반이 마련됨.

## 🔗 참고 자료
- [Blog] mythos.log: Linux Tutorial #1 (부팅하기)
- [Book] 리눅스 커널 소스 해설: 기초입문 (정재준 저)